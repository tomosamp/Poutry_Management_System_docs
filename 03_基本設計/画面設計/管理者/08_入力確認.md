# 入力確認画面

## 1. 画面概要
- 目的: CSVアップロードまたは手入力で取得したデータを確定前に最終確認し、必要な修正や警告対応を行う。
- 主利用者: 食鳥協会職員。
- 画面カテゴリ: データ提出。

## 2. 表示内容
- 生産者情報（生産者名、鳥種、地域ブロック）。
- 提出月。
- データサマリ: 鳥種別項目をテーブル表示。
- 1羽あたりの平均重量（処理重量÷処理羽数）と正常範囲インジケータ。
- 確認チェック項目。
  - 手入力: 生産者1件分の確認。
  - CSVアップロード: 全生産者分を一覧（foreach）で表示し、行/セル単位で修正可能。

## 3. 画面要素
| ID | 要素 | 種別 | 挙動 |
| --- | --- | --- | --- |
| DISP-CFM-01 | 基本情報ブロック | 表示 | 生産者名、提出月、担当職員を表示。 |
| TABLE-CFM-01 | データテーブル | 表 | 項目名、単位、入力値（修正可）、警告アイコン。 |
| DISP-CFM-02 | 1羽あたり平均重量カード | 表示 | 処理重量÷処理羽数を自動計算。2.0kg以上5.0kg未満を正常値とする |
| CHK-CFM-01 | 確認チェックボックス | チェック | 「データ内容を確認し正しいことを確認しました」。 |
| BTN-CFM-01 | 登録実行 | ボタン | チェックボックスONで活性化。 |
| BTN-CFM-02 | 修正に戻る | ボタン | 直前の入力画面へ戻る。 |

## 4. バリデーション
- サーバ側バリデーションエラーがある場合は登録できない。
- 1羽あたり平均重量が2.0kg未満または5.0kg以上の場合、平均重量タグを警告色で表示する（登録は可能）。

## 5. 遷移
- 登録実行成功 → 手入力登録画面へ戻る（成功メッセージ表示）。
- 修正に戻る → CSVアップロードまたは手入力登録画面。

## 6. 備考
- 登録時に提出履歴へ「登録日時」「担当職員」「入力経路（CSV/手入力）」を記録。
- 将来、承認フロー導入に備え「承認待ち」ステータスを追加予定。
- 平均重量の参考正常値は2.3kg〜3.6kgとし、閾値（2.0kg/5.0kg）は警告判断用のシステム既定値として設定する。
- 平均重量の算出は `平均重量(kg) = 生体処理重量(kg) ÷ 生体処理羽数(羽)` とする。羽数が0の場合は算出しない。
