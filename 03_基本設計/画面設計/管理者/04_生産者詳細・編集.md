# 生産者詳細・編集画面

## 1. 画面概要
- 目的: 工場の基本情報・所在地・代表者/申請者情報を閲覧・更新し、特記事項メモや履歴を管理する。
- 主利用者: 食鳥協会職員。
- 画面カテゴリ: 生産者管理。

## 2. 主な機能
1. 工場基本情報の表示・編集。
2. 所在地情報（郵便番号、自動住所補完）編集。
3. 代表者情報（任意入力）、申請者複数登録・履歴保持。
4. 廃業時のステータス更新（削除処理）と確認ダイアログ表示。
5. 他工場との合併処理の起点操作（後続ロジックは別設計）。
6. 個別データ取り込み（CSV/手入力）の起点操作。
7. 特記事項メモの登録・更新。
8. 編集履歴の参照（項目単位差分）。

## 3. 画面要素
| ID | セクション | 主な項目 |
| --- | --- | --- |
| SEC-DETAIL-01 | 基本情報 | 工場名、工場名カナ、鳥種（単一選択）、事業者種別。 |
| SEC-DETAIL-02 | 所在地 | 郵便番号、都道府県、市区町村、番地、地域ブロック（参照のみ）。 |
| SEC-DETAIL-03 | 代表者情報 | 氏名（任意）、役職（任意）、電話番号（任意）。 |
| SEC-DETAIL-04 | 申請者情報 | 申請者一覧テーブル（氏名、部署、電話、メール、現行フラグ、有効期間）。追加/編集ダイアログ。 |
| SEC-DETAIL-05 | 特記事項メモ | テキストエリア、更新日時と更新者表示。 |
| SEC-DETAIL-06 | 編集履歴 | 最新10件の変更履歴（日時、担当職員、変更項目）。詳細モーダルで差分表示。 |
| BTN-DETAIL-01 | 保存ボタン | 入力内容を保存し、成功メッセージを表示。 |
| BTN-DETAIL-02 | 廃業（削除） | 廃業理由入力ダイアログを経て廃業フラグをONにし、履歴へ記録。 |
| BTN-DETAIL-03 | 合併実行 | 合併先工場を検索し、統合申請モーダルを起動（承認フローは別途設計）。 |
| BTN-DETAIL-04 | CSV個別アップロード | 対象工場向けにCSVファイルをドラッグ&ドロップで追加。アップロード後は入力確認画面へ遷移。 |
| BTN-DETAIL-05 | 手入力 | 手入力登録画面の該当工場モードを起動。 |
| BTN-DETAIL-06 | キャンセル | 変更を破棄し一覧へ戻る。 |

## 4. 入力・検証
- 郵便番号: 7桁数字。入力後に都道府県・市区町村を自動補完。
- 鳥種: 単一選択（ブロイラー/成鶏/地鶏）。
- 代表者情報: 全項目任意。未入力でも登録可能。
- 申請者: 複数登録可能。同一工場内で履歴保持のため、退任者は「無効」ステータスで残す。
- 特記事項: 2000文字まで。

## 5. 遷移
- 保存成功後: 生産者詳細画面のまま（成功トースト表示）。
- 廃業（削除）: 廃業フラグON後も履歴閲覧可能。一覧上では「廃業」ステータスで表示。
- 合併実行: 合併モーダル完了後、統合対象の再計算結果を確認するため再読込を実行。
- キャンセル: 生産者一覧へ。
- 履歴詳細リンク: モーダルで差分表示。

## 6. 備考
- 申請者情報の履歴保持要件（2.2）を満たすため、削除ではなくステータス変更で対応。
- 特記事項はCSVアップロードや手入力画面で参照可能なAPIを提供する。
- 合併ロジック（マスタ統合・履歴統合・提出データの再紐付け）はデータ移行/ワークフローチームと別途定義する。
- 個別CSVアップロード/手入力ボタンは提出経路を明確に記録するためにアクセスログを取得する。
