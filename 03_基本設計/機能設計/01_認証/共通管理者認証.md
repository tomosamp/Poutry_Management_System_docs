# 共通管理者認証 機能仕様

## 1. 概要
- **目的**: 共通管理者アカウントによる認証を行い、システム全体のアクセスを制御する。
- **対象利用者**: 食鳥協会職員（共通アカウント使用）。
- **関連画面**: `01_ログイン`, `99_ヘッダー`（ログアウト）。

## 2. 業務フロー概要
1. ユーザーがログイン画面で ID・パスワードを入力し送信。
2. Laravel標準のコントローラが資格情報を検証し、成功時はセッションを開始。
3. Bladeレイヤーはセッション情報を保持した状態で管理ダッシュボードを描画。
4. ヘッダーのログアウト操作でセッション破棄、ログイン画面へ戻る。

## 3. 入出力
| 区分 | 項目 | 内容 |
| --- | --- | --- |
| 入力 | ログインID | 英数字・記号、最大64文字。 |
| 入力 | パスワード | 英数字・記号、最大128文字。 |
| 出力 | セッションID | Laravelセッション（Cookie格納）。 |
| 出力 | 認証エラー | `401` 認証失敗メッセージ。「IDまたはパスワードが正しくありません」。 |

## 4. バリデーション
- 未入力チェック（ID・パスワードともに必須）。
- 文字数上限チェック（64/128）。

## 5. セッション管理
- 認証成功時にLaravelセッションを開始し、有効期限（例: 8時間）を設定。
- アイドルタイムアウト: 最終操作から一定時間（例: 30分）で自動ログアウト。
- ログアウト時はサーバー側でセッションを破棄し、ブラウザCookieのセッションIDも削除する。

## 6. 例外・エラー処理
- ネットワークエラー時: 「認証サーバーに接続できません。再度お試しください。」を表示。
- セッション期限切れ: 画面遷移時にセッションミドルウェアが検知したらログイン画面へリダイレクトし、再ログインを促す。

## 7. 監査・ログ
- ログイン成功・失敗・ログアウトをLaravelのログ（`info`/`warning`）に記録。最低限、時刻・IP・試行結果を残す。

## 8. 今後の拡張想定
- 個別職員アカウント発行に向けたユーザー管理機能の追加。
